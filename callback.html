<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="page-title">Mitus</title>
  <script>
    const titleText = "Mitus Bot";
    let i = 0;
    const interval = setInterval(() => {
      document.title = titleText.substring(0, i + 1);
      i++;
      if (i === titleText.length) clearInterval(interval);
    }, 300);
  </script>
  <link rel="icon" href="https://.../mitus-icon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* (tus estilos aquí, idénticos a los que ya tienes) */
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo"><img src="..." alt="Logo" class="logo-img">Mitus</div>
    <nav>…</nav>
    <div class="auth">
      <a href="premium.html" class="premium-button">Premium</a>
      <div id="user-info" style="display:none; align-items:center; gap:8px;">
        <img id="user-avatar" src="" alt="Avatar" style="width:28px;height:28px;border-radius:50%;">
        <span id="username" style="color:#fff;"></span>
        <button id="logout" style="background:none; border:none; color:#D48EF3; cursor:pointer;">Cerrar sesión</button>
      </div>
      <a href="#" id="login" class="btn-outline">…Login</a>
    </div>
  </header>

  <!-- Resto del contenido igual… -->

  <!-- SDK de Auth0 -->
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
  <script>
    const auth0 = await createAuth0Client({
      domain: "dev-rf5v0xclx7up4g24.us.auth0.com", // tu dominio Auth0
      client_id: "EJAPJWHfb59kRSQD4hcWo4g5ZGjMNK4B",                    // tu client ID de Auth0
      authorizationParams: {
        redirect_uri: window.location.origin        // asegura que callback sea esta misma página
      }
    });

    window.onload = async () => {
      const query = window.location.search;
      if (query.includes("code=") && query.includes("state=")) {
        await auth0.handleRedirectCallback();
        window.history.replaceState({}, document.title, window.location.pathname);
      }

      const isAuthenticated = await auth0.isAuthenticated();
      if (isAuthenticated) {
        const user = await auth0.getUser();
        document.getElementById('login').style.display = 'none';
        document.getElementById('user-info').style.display = 'flex';
        document.getElementById('username').textContent = user.name || user.email;
        document.getElementById('user-avatar').src = user.picture || '';
      } else {
        document.getElementById('login').style.display = 'inline-flex';
        document.getElementById('user-info').style.display = 'none';
      }
    };

    document.getElementById('login').addEventListener('click', () => {
      auth0.loginWithRedirect();
    });

    document.getElementById('logout').addEventListener('click', () => {
      auth0.logout({ logoutParams: { returnTo: window.location.origin } });
    });
  </script>
</body>
</html>
